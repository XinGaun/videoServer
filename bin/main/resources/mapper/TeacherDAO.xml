<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.TeacherDAO">
	<!-- 添加订单信息 -->
<insert id="addTeacher" parameterType="com.entity.TeacherDomain"  keyProperty="teacher_id">
			insert into teacher_tab(
				teacher_id,
				teacher_name,
				teacher_phone,
				teacher_pwd,
				teacher_introduce,
				teacher_imgurl,
				teacher_status,
				teacher_date,
				teacher_mail
			)values(
				#{teacher_id,jdbcType=VARCHAR},
				#{teacher_name,jdbcType=VARCHAR},
				#{teacher_phone,jdbcType=VARCHAR},
				#{teacher_pwd,jdbcType=VARCHAR},
				#{teacher_introduce,jdbcType=VARCHAR},
				#{teacher_imgurl,jdbcType=VARCHAR},
				#{teacher_status,jdbcType=VARCHAR},
				#{teacher_date,jdbcType=VARCHAR},
				#{teacher_mail,jdbcType=VARCHAR})
			
</insert>

<delete id="deleteTeacher" parameterType="com.entity.TeacherDomain">
			delete from teacher_tab
			where 1=1 
			<if test="teacher_id != null and teacher_id.trim().length()>0">
				 AND teacher_id = #{teacher_id}
			</if>
			<if test="teacher_name != null and teacher_name.trim().length()>0">
				 AND teacher_name = #{teacher_name}
			</if>
			<if test="teacher_phone != null and teacher_phone.trim().length()>0">
				 AND teacher_phone = #{teacher_phone}
			</if>
			<if test="teacher_pwd != null and teacher_pwd.trim().length()>0">
				 AND teacher_pwd = #{teacher_pwd}
			</if>
			<if test="teacher_introduce != null and teacher_introduce.trim().length()>0">
				 AND teacher_introduce = #{teacher_introduce}
			</if>
			<if test="teacher_imgurl != null and teacher_imgurl.trim().length()>0">
				 AND teacher_imgurl = #{teacher_imgurl}
			</if>
			<if test="teacher_status != null and teacher_status.trim().length()>0">
				 AND teacher_status = #{teacher_status}
			</if>
			<if test="teacher_date != null and teacher_date.trim().length()>0">
				 AND teacher_date = #{teacher_date}
			</if>
			<if test="teacher_mail != null and teacher_mail.trim().length()>0">
				 AND teacher_mail = #{teacher_mail}
			</if>
</delete>

<update id="modifyTeacher" parameterType="com.entity.TeacherDomain">
			update teacher_tab set 
			<if test="teacher_name != null and teacher_name.trim().length()>0">
				teacher_name = #{teacher_name,jdbcType=VARCHAR},
			</if>
			<if test="teacher_phone != null and teacher_phone.trim().length()>0">
				teacher_phone = #{teacher_phone,jdbcType=VARCHAR},
			</if>
			<if test="teacher_pwd != null and teacher_pwd.trim().length()>0">
				teacher_pwd = #{teacher_pwd,jdbcType=VARCHAR},
			</if>
			<if test="teacher_introduce != null and teacher_introduce.trim().length()>0">
				teacher_introduce = #{teacher_introduce,jdbcType=VARCHAR},
			</if>
			<if test="teacher_imgurl != null and teacher_imgurl.trim().length()>0">
				teacher_imgurl = #{teacher_imgurl,jdbcType=VARCHAR},
			</if>
			<if test="teacher_status != null and teacher_status.trim().length()>0">
				teacher_status = #{teacher_status,jdbcType=VARCHAR},
			</if>
			<if test="teacher_date != null and teacher_date.trim().length()>0">
				teacher_date = #{teacher_date,jdbcType=VARCHAR},
			</if>
			<if test="teacher_mail != null and teacher_mail.trim().length()>0">
				teacher_mail = #{teacher_mail,jdbcType=VARCHAR},
			</if>
				teacher_id = #{teacher_id,jdbcType=VARCHAR}
			where 1=1 
			<if test="teacher_id != null and teacher_id.trim().length()>0">
				 AND teacher_id = #{teacher_id}
			</if>
			<!-- <if test="teacher_name != null and teacher_name.trim().length()>0">
				 AND teacher_name = #{teacher_name}
			</if>
			<if test="teacher_phone != null and teacher_phone.trim().length()>0">
				 AND teacher_phone = #{teacher_phone}
			</if>
			<if test="teacher_pwd != null and teacher_pwd.trim().length()>0">
				 AND teacher_pwd = #{teacher_pwd}
			</if>
			<if test="teacher_introduce != null and teacher_introduce.trim().length()>0">
				 AND teacher_introduce = #{teacher_introduce}
			</if>
			<if test="teacher_imgurl != null and teacher_imgurl.trim().length()>0">
				 AND teacher_imgurl = #{teacher_imgurl}
			</if>
			<if test="teacher_status != null and teacher_status.trim().length()>0">
				 AND teacher_status = #{teacher_status}
			</if>
			<if test="teacher_date != null and teacher_date.trim().length()>0">
				 AND teacher_date = #{teacher_date}
			</if>
			<if test="teacher_mail != null and teacher_mail.trim().length()>0">
				 AND teacher_mail = #{teacher_mail}
			</if> -->
</update>

<select id="queryTeacherCount" parameterType="com.entity.TeacherDomain" resultType="Integer">
			select count(1) from  teacher_tab
			 where 1=1 
			<if test="teacher_id != null and teacher_id.trim().length()>0">
				 AND teacher_id = #{teacher_id}
			</if>
			<if test="teacher_name != null and teacher_name.trim().length()>0">
				 AND teacher_name = #{teacher_name}
			</if>
			<if test="teacher_phone != null and teacher_phone.trim().length()>0">
				 AND teacher_phone = #{teacher_phone}
			</if>
			<if test="teacher_pwd != null and teacher_pwd.trim().length()>0">
				 AND teacher_pwd = #{teacher_pwd}
			</if>
			<if test="teacher_introduce != null and teacher_introduce.trim().length()>0">
				 AND teacher_introduce = #{teacher_introduce}
			</if>
			<if test="teacher_imgurl != null and teacher_imgurl.trim().length()>0">
				 AND teacher_imgurl = #{teacher_imgurl}
			</if>
			<if test="teacher_status != null and teacher_status.trim().length()>0">
				 AND teacher_status = #{teacher_status}
			</if>
			<if test="teacher_date != null and teacher_date.trim().length()>0">
				 AND teacher_date = #{teacher_date}
			</if>
			<if test="teacher_mail != null and teacher_mail.trim().length()>0">
				 AND teacher_mail = #{teacher_mail}
			</if>
</select>

<select id="queryListTeacher" parameterType="com.entity.TeacherDomain" resultType="com.entity.TeacherDomain">
			select 
				teacher_id,
				teacher_name,
				teacher_phone,
				teacher_pwd,
				teacher_introduce,
				teacher_imgurl,
				teacher_status,
				teacher_date,
				teacher_mail
			 from teacher_tab
			 where 1=1 
			<if test="teacher_id != null and teacher_id.trim().length()>0">
				 AND teacher_id = #{teacher_id}
			</if>
			<if test="teacher_name != null and teacher_name.trim().length()>0">
				 AND teacher_name = #{teacher_name}
			</if>
			<if test="teacher_phone != null and teacher_phone.trim().length()>0">
				 AND teacher_phone = #{teacher_phone}
			</if>
			<if test="teacher_pwd != null and teacher_pwd.trim().length()>0">
				 AND teacher_pwd = #{teacher_pwd}
			</if>
			<if test="teacher_introduce != null and teacher_introduce.trim().length()>0">
				 AND teacher_introduce = #{teacher_introduce}
			</if>
			<if test="teacher_imgurl != null and teacher_imgurl.trim().length()>0">
				 AND teacher_imgurl = #{teacher_imgurl}
			</if>
			<if test="teacher_status != null and teacher_status.trim().length()>0">
				 AND teacher_status = #{teacher_status}
			</if>
			<if test="teacher_date != null and teacher_date.trim().length()>0">
				 AND teacher_date = #{teacher_date}
			</if>
			<if test="teacher_mail != null and teacher_mail.trim().length()>0">
				 AND teacher_mail = #{teacher_mail}
			</if>
			<if test="page != null" >
				<![CDATA[  limit #{page.startNum},#{page.endIndex}  ]]>
			</if>
</select>
<select id="queryTeacherRight" parameterType="string" resultType="com.entity.RightDomain">
	select DISTINCT right_id, right_name 
		from right_tab 
		where right_id in(
			select right_id 
			from role_right_tab 
			where role_id in(
				select role_id 
				from user_role_tab 
				where user_id = #{userId}
			)
		)
</select>
</mapper>