<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.InventoryAlterTabDao">
	<!-- 添加库库存变更 -->
	<insert id="addInventoryAlterTab" parameterType="com.entity.InventoryAlterTab">
		INSERT INTO
		inventory_alter_tab(warehouse_id, comm_id,cargo_id,inve_alter_code,inve_alter_type,inve_alter_cause,inve_alter_date
		<if test="source_ware_id!=null">
			,source_ware_id
		</if>
		<if test="bourn_ware_id!=null">
			,bourn_ware_id
		</if>
		<if test="purc_id!=null">
			,purc_id
		</if>
		<if test="orde_id!=null">
			,orde_id
		</if>
		<if test="chan_id!=null">
			,chan_id
		</if>
		<if test="deli_id!=null">
			,deli_id
		</if>
		<if test="come_ware_id!=null">
			,come_ware_id
		</if>
		<if test="staff_id!=null">
			,staff_id
		</if>
		<if test="inve_alter_remark!=null">
			,inve_alter_remark
		</if>
		<if test="shop_id!=null">
			,shop_id
		</if>
		) VALUES
		(#{warehouse_id},#{comm_id},#{cargo_id},#{inve_alter_code},#{inve_alter_type},#{inve_alter_cause},to_timestamp(#{inve_alter_date},'yyyy-mm-dd hh24:mi:ss')
		<if test="source_ware_id!=null">
			,#{source_ware_id}
		</if>
		<if test="bourn_ware_id!=null">
			,#{bourn_ware_id}
		</if>
		<if test="purc_id!=null">
			,#{purc_id}
		</if>
		<if test="orde_id!=null">
			,#{orde_id}
		</if>
		<if test="chan_id!=null">
			,#{chan_id}
		</if>
		<if test="deli_id!=null">
			,#{deli_id}
		</if>
		<if test="come_ware_id!=null">
			,#{come_ware_id}
		</if>
		<if test="staff_id!=null">
			,#{staff_id}
		</if>
		<if test="inve_alter_remark!=null">
			,#{inve_alter_remark}
		</if>
		<if test="shop_id!=null">
			,#{shop_id}
		</if>
		)
	</insert>
	<!-- 查询库库存变更 -->
	<select id="queryInventoryAlterTab" resultType="java.util.HashMap"
		parameterType="java.util.HashMap">
		SELECT inve_alter_id,shop_id,warehouse_id,comm_id,cargo_id,inve_alter_code,inve_alter_type,inve_alter_cause,to_char(inve_alter_date,'yyyy-mm-dd hh24:mi:ss')inve_alter_date,source_ware_id,bourn_ware_id,purc_id,orde_id,chan_id,deli_id,come_ware_id,staff_id,inve_alter_remark FROM inventory_alter_tab WHERE
		 1=1
		<if test="inve_alter_id!=null">
			and inve_alter_id = #{inve_alter_id}
		</if>
		<if test="warehouse_id!=null">
			and warehouse_id = #{warehouse_id}
		</if>
		<if test="comm_id!=null">
			and comm_id = #{comm_id}
		</if>
		<if test="inve_alter_type!=null">
			and inve_alter_type = #{inve_alter_type}
		</if>
		<if test="source_ware_id!=null">
			and source_ware_id = #{source_ware_id}
		</if>
		<if test="bourn_ware_id!=null">
			and bourn_ware_id = #{bourn_ware_id}
		</if>
		<if test="purc_id!=null">
			and purc_id = #{purc_id}
		</if>
		<if test="orde_id!=null">
			and orde_id = #{orde_id}
		</if> 
		<if test="chan_id!=null">
			and chan_id = #{chan_id}
		</if> 
		<if test="deli_id!=null">
			and deli_id = #{deli_id}
		</if> 
		<if test="come_ware_id!=null">
			and come_ware_id = #{come_ware_id}
		</if> 
		<if test="staff_id!=null">
			and staff_id = #{staff_id}
		</if> 
		<if test="shop_id!=null">
			and shop_id = #{shop_id}
		</if> 
		LIMIT #{page} OFFSET #{nums}
	</select>
	<!-- 查询库库存变更总数信息 -->
	<select id="queryInventoryAlterTabCount" resultType="int"
		parameterType="java.util.HashMap">
		SELECT COUNT(inve_alter_id) FROM inventory_alter_tab WHERE 1=1
		<if test="inve_alter_id!=null">
			and inve_alter_id = #{inve_alter_id}
		</if>
		<if test="warehouse_id!=null">
			and warehouse_id = #{warehouse_id}
		</if>
		<if test="comm_id!=null">
			and comm_id = #{comm_id}
		</if>
		<if test="inve_alter_type!=null">
			and inve_alter_type = #{inve_alter_type}
		</if>
		<if test="source_ware_id!=null">
			and source_ware_id = #{source_ware_id}
		</if>
		<if test="bourn_ware_id!=null">
			and bourn_ware_id = #{bourn_ware_id}
		</if>
		<if test="purc_id!=null">
			and purc_id = #{purc_id}
		</if>
		<if test="orde_id!=null">
			and orde_id = #{orde_id}
		</if> 
		<if test="chan_id!=null">
			and chan_id = #{chan_id}
		</if> 
		<if test="deli_id!=null">
			and deli_id = #{deli_id}
		</if> 
		<if test="come_ware_id!=null">
			and come_ware_id = #{come_ware_id}
		</if> 
		<if test="staff_id!=null">
			and staff_id = #{staff_id}
		</if>  
		<if test="shop_id!=null">
			and shop_id = #{shop_id}
		</if> 
	</select>
	<!-- 更新库库存变更信息 -->
	<update id="updateInventoryAlterTab" parameterType="com.entity.InventoryAlterTab">
		UPDATE inventory_alter_tab
		<trim prefix="set" suffixOverrides=",">
			<if test="warehouse_id!=null">
				warehouse_id=#{warehouse_id},
			</if>
			<if test="comm_id!=null">
				comm_id=#{comm_id},
			</if>
			<if test="cargo_id!=null">
				cargo_id = #{cargo_id},
			</if>
			<if test="inve_alter_code!=null">
				inve_alter_code = #{inve_alter_code},
			</if>
			<if test="inve_alter_type!=null">
				inve_alter_type = #{inve_alter_type},
			</if>
			<if test="inve_alter_cause!=null">
				inve_alter_cause = #{inve_alter_cause},
			</if>
			<if test="inve_alter_date!=null">
				inve_alter_date = to_timestamp(#{inve_alter_date},'yyyy-mm-dd hh24:mi:ss'),
			</if>
			<if test="source_ware_id!=null">
				source_ware_id =  #{source_ware_id},
			</if>
			<if test="bourn_ware_id!=null">
				bourn_ware_id = #{bourn_ware_id},
			</if>
			<if test="purc_id!=null">
				purc_id = #{purc_id},
			</if>
			<if test="orde_id!=null">
				orde_id = #{orde_id},
			</if>
			<if test="chan_id!=null">
				chan_id = #{chan_id},
			</if>
			<if test="deli_id!=null">
				deli_id = #{deli_id},
			</if>
			<if test="come_ware_id!=null">
				come_ware_id = #{come_ware_id},
			</if>
			<if test="staff_id!=null">
				staff_id = #{staff_id},
			</if>
			<if test="inve_alter_remark!=null">
				inve_alter_remark = #{inve_alter_remark},
			</if>
			<if test="shop_id!=null">
			 	shop_id = #{shop_id},
			</if> 
		</trim>
		WHERE inve_alter_id =#{inve_alter_id}
	</update>
	<!-- 删除库库存变更信息 -->
	<delete id="deleteInventoryAlterTab" parameterType="int">
		DELETE FROM
		inventory_alter_tab WHERE inve_alter_id =#{inve_alter_id}
	</delete>
</mapper>