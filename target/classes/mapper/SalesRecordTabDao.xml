<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.SalesRecordTabDao">
	<!-- 添加商品销售记录 -->
	<insert id="addSalesRecordTab" parameterType="java.util.HashMap">
		INSERT INTO sales_record_tab(orde_id, comm_id,sale_price,real_price,cargo_id
		<if test="discounts_id!=null">
			,discounts_id
		</if>
		) VALUES (#{orde_id}
		<if test="comm_putaway_id!=null">
			,#{comm_putaway_id}
		</if>
		<if test="comm_id!=null">
			,#{comm_id}
		</if>
		,#{sale_price},#{real_price},#{cargo_id}
		<if test="discounts_id!=null">
			,#{discounts_id}
		</if>
		)
	</insert>
	<!-- 查询商品销售记录 -->
	<select id="querySalesRecordTab" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT sale_id,orde_id,comm_id,sale_price,real_price,cargo_id,discounts_id,chan_id FROM sales_record_tab WHERE 1=1 
		<if test="sale_id!=null">
			and sale_id = #{sale_id}
		</if>
		<if test="orde_id!=null">
			and orde_id = #{orde_id}
		</if>
		<if test="comm_id!=null">
			and comm_id = #{comm_id}
		</if>
		<if test="discounts_id!=null">
			and discounts_id = #{discounts_id}
		</if> 
		<if test="chan_id!=null">
			and chan_id = #{chan_id}
		</if> 
		<if test="chan!=null">
			and chan_id is null
		</if> 
		LIMIT #{page} OFFSET #{nums}
	</select>
	<!-- 查询商品销售记录总数信息 -->
	<select id="querySalesRecordTabCount" resultType="int" parameterType="java.util.HashMap">
		SELECT COUNT(sale_id) FROM sales_record_tab WHERE 1=1 
		<if test="sale_id!=null">
			and sale_id = #{sale_id}
		</if>
		<if test="orde_id!=null">
			and orde_id = #{orde_id}
		</if>
		<if test="comm_id!=null">
			and comm_id = #{comm_id}
		</if>
		<if test="discounts_id!=null">
			and discounts_id = #{discounts_id}
		</if> 
		<if test="chan_id!=null">
			and chan_id = #{chan_id}
		</if> 
		<if test="chan!=null">
			and chan_id is null
		</if>
	</select>
	<!-- 更新商品销售记录信息 -->
	<update id="updateSalesRecordTab" parameterType="com.entity.SalesRecordTab">
		UPDATE sales_record_tab 
		<trim prefix="set" suffixOverrides=",">
			<if test="orde_id!=null">
				orde_id=#{orde_id},
			</if>
			<if test="comm_id!=null">
				comm_id=#{comm_id},
			</if>
			<if test="sale_price!=null">
				sale_price=#{sale_price},
			</if>
			<if test="real_price!=null">
				real_price=#{real_price},
			</if>
			<if test="cargo_id!=null">
				cargo_id=#{cargo_id},
			</if>
			<if test="discounts_id!=null">
				discounts_id=#{discounts_id},
			</if>
		</trim> 
		WHERE sale_id =#{sale_id}
	</update>
	<!-- 删除商品销售记录信息 -->
	<delete id="deleteSalesRecordTab" parameterType="int">
		DELETE FROM sales_record_tab WHERE sale_id =#{sale_id}
	</delete>
</mapper>