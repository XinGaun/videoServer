<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.FinancialTabDao">
	<!-- 添加财务记录信息 -->
	<insert id="addFinancialTab" parameterType="com.entity.FinancialTab">
		INSERT INTO financial_tab(orde_id, fina_money,pay_type,pay_date,pay_number,surplus_money
		<if test="refund_rele_id!=null">
			,refund_rele_id
		</if>
		<if test="bank_name!=null">
			,bank_name
		</if>
		<if test="bank_num!=null">
			,bank_num
		</if>
		) 
		VALUES (#{orde_id},#{fina_money},#{pay_type},to_timestamp(#{pay_date},'yyyy-mm-dd hh24:mi:ss'),#{pay_number},#{surplus_money}
		<if test="refund_rele_id!=null">
			,#{refund_rele_id}
		</if>
		<if test="bank_name!=null">
			,#{bank_name}
		</if>
		<if test="bank_num!=null">
			,#{bank_num}
		</if>
		)
	</insert>
	<!-- 查询财务记录信息 -->
	<select id="queryFinancialTab" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT fina_id,orde_id,fina_money,pay_type,to_char(pay_date,'yyyy-mm-dd hh24:mi:ss')pay_date,pay_number,surplus_money,refund_rele_id,bank_name,bank_num FROM financial_tab WHERE 1=1 
		<if test="fina_id!=null">
			and fina_id = #{fina_id}
		</if>
		<if test="orde_id!=null">
			and orde_id = #{orde_id}
		</if>
		<if test="pay_type!=null">
			and pay_type = #{pay_type}
		</if>
		<if test="pay_number!=null">
			and pay_number = #{pay_number}
		</if> 
		<if test="refund_rele_id!=null">
			and refund_rele_id = #{refund_rele_id}
		</if> 
		<if test="bank_name!=null">
			and bank_name = #{bank_name}
		</if> 
		<if test="bank_num!=null">
			and bank_num = #{bank_num}
		</if> 
		LIMIT #{page} OFFSET #{nums}
	</select>
	<!-- 查询财务记录总数信息 -->
	<select id="queryFinancialTabCount" resultType="int" parameterType="java.util.HashMap">
		SELECT COUNT(fina_id) FROM financial_tab WHERE 1=1 
		<if test="fina_id!=null">
			and fina_id = #{fina_id}
		</if>
		<if test="orde_id!=null">
			and orde_id = #{orde_id}
		</if>
		<if test="pay_type!=null">
			and pay_type = #{pay_type}
		</if>
		<if test="pay_number!=null">
			and pay_number = #{pay_number}
		</if> 
		<if test="refund_rele_id!=null">
			and refund_rele_id = #{refund_rele_id}
		</if> 
		<if test="bank_name!=null">
			and bank_name = #{bank_name}
		</if> 
		<if test="bank_num!=null">
			and bank_num = #{bank_num}
		</if> 
	</select>
	<!-- 更新财务记录信息 -->
	<update id="updateFinancialTab" parameterType="com.entity.FinancialTab">
		UPDATE financial_tab 
		<trim prefix="set" suffixOverrides=",">
			<if test="orde_id!=null">
				orde_id=#{orde_id},
			</if>
			<if test="fina_money!=null">
				fina_money=#{fina_money},
			</if>
			<if test="pay_type!=null">
				pay_type=#{pay_type},
			</if>
			<if test="pay_date!=null">
				pay_date=to_timestamp(#{pay_date},'yyyy-mm-dd hh24:mi:ss'),
			</if>
			<if test="pay_number!=null">
				pay_number=#{pay_number},
			</if>
			<if test="surplus_money!=null">
				surplus_money=#{surplus_money},
			</if>
			<if test="refund_rele_id!=null">
				refund_rele_id=#{refund_rele_id},
			</if>
			<if test="bank_name!=null">
				bank_name=#{bank_name},
			</if>
			<if test="bank_num!=null">
				bank_num=#{bank_num},
			</if>
		</trim> 
		WHERE fina_id =#{fina_id}
	</update>
	<!-- 删除财务记录信息 -->
	<delete id="deleteFinancialTab" parameterType="int">
		DELETE FROM financial_tab WHERE fina_id =#{fina_id}
	</delete>
</mapper>