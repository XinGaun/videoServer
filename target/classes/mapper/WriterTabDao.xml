<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.WriterTabDao">
	<!-- 添加文案信息 -->
	<insert id="addWriterTab" parameterType="com.entity.WriterTab">
		INSERT INTO writer_tab(writ_title, writ_img,writ_test,writ_status,writ_date,staf_id) VALUES (#{writ_title},#{writ_img},#{writ_test},#{writ_status},to_timestamp(#{writ_date},'yyyy-mm-dd hh24:mi:ss'),#{staf_id})
	</insert>
	<!-- 查询文案信息 -->
	<select id="queryWriterTab" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT writ_id,writ_title,writ_img,writ_test,writ_status,to_char(writ_date,'yyyy-mm-dd hh24:mi:ss')writ_date,staf_id FROM writer_tab WHERE 1=1 
		<if test="writ_id!=null">
			and writ_id = #{writ_id}
		</if>
		<if test="writ_title!=null">
			and writ_title = #{writ_title}
		</if>
		<if test="writ_status!=null">
			and writ_status = #{writ_status}
		</if>
		<if test="staf_id!=null">
			and staf_id = #{staf_id}
		</if>
		LIMIT #{page} OFFSET #{nums}
	</select>
	<!-- 查询文案总数信息 -->
	<select id="queryWriterTabCount" resultType="int" parameterType="java.util.HashMap">
		SELECT COUNT(writ_id) FROM writer_tab WHERE 1=1 
		<if test="writ_id!=null">
			and writ_id = #{writ_id}
		</if>
		<if test="writ_title!=null">
			and writ_title = #{writ_title}
		</if>
		<if test="writ_status!=null">
			and writ_status = #{writ_status}
		</if>
		<if test="staf_id!=null">
			and staf_id = #{staf_id}
		</if>
	</select>
	<!-- 更新文案信息 -->
	<update id="updateWriterTab" parameterType="com.entity.WriterTab">
		UPDATE writer_tab 
		<trim prefix="set" suffixOverrides=",">
			<if test="writ_title!=null">
				writ_title=#{writ_title},
			</if>
			<if test="writ_img!=null">
				writ_img=#{writ_img},
			</if>
			<if test="writ_test!=null">
				writ_test=#{writ_test},
			</if>
			<if test="writ_status!=null">
				writ_status=#{writ_status},
			</if>
		</trim> 
		WHERE writ_id =#{writ_id}
	</update>
	<!-- 删除文案信息 -->
	<delete id="deleteWriterTab" parameterType="int">
		DELETE FROM writer_tab WHERE writ_id =#{writ_id}
	</delete>
</mapper>