<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.RoleTabDao">
	<!-- 添加角色 -->
	<insert id="addRoleTab" parameterType="com.entity.RoleTab">
		INSERT INTO role_tab(role_name, role_righ_arr
		<if test="role_stop_status!=null">
			,role_stop_status
		</if>
		<if test="role_dete_status!=null">
			,role_dete_status
		</if>
		) VALUES (#{role_name},array${role_righ_arr}
		<if test="role_stop_status!=null">
			,#{role_stop_status}
		</if>
		<if test="role_dete_status!=null">
			,#{role_dete_status}
		</if>
		)
	</insert>
	<!-- 查询角色 -->
	<select id="queryaddRole" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT role_id,role_name,role_righ_arr,role_stop_status,role_dete_status FROM role_tab WHERE 1=1
		<if test="role_id!=null">
			AND role_id = #{role_id}
		</if>
		<if test="role_name!=null">
			AND role_name = #{role_name}
		</if>
		<if test="role_stop_status!=null">
			AND role_stop_status = #{role_stop_status}
		</if> 
	</select>
	<!-- 查询角色总数 -->
	<select id="queryaddRoleCount" parameterType="java.util.HashMap" resultType="int">
		SELECT COUNT(role_id) FROM role_tab WHERE 1=1
		<if test="role_id!=null">
			AND role_id = #{role_id}
		</if>
		<if test="role_name!=null">
			AND role_name = #{role_name}
		</if>
		<if test="role_stop_status!=null">
			AND role_stop_status = #{role_stop_status}
		</if>
	</select>
	<!-- 修改角色 -->
	<update id="updateRole" parameterType="com.entity.RoleTab">
		UPDATE role_tab 
		<trim prefix="set" suffixOverrides=",">
			<if test="role_name!=null">
				role_name=#{role_name},
			</if>
			<if test="role_righ_arr!=null">
				role_righ_arr=array${role_righ_arr},
			</if>
			<if test="role_stop_status!=null">
				role_stop_status=#{role_stop_status},
			</if>
			<if test="role_dete_status!=null">
				role_dete_status=#{role_dete_status},
			</if>
		</trim> 
		WHERE role_id =#{role_id}
	</update>
	<!-- 删除角色 -->
	<delete id="deleteRole" parameterType="int">
		delete from role_tab where role_id = #{role_id}
	</delete>
</mapper>