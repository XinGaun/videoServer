<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.VideoTabDao">
	<insert id="createVideo" parameterType="com.entity.VideoTab">
		insert into video_tab(video_grade,video_img_url,video_introduce,video_name,video_url,video_date,teacher_id,video_form_id,video_qz,video_ppt,video_time) 
		values(#{video_grade,jdbcType=INTEGER},#{video_img_url,jdbcType=VARCHAR},#{video_introduce,jdbcType=VARCHAR},#{video_name,jdbcType=VARCHAR},#{video_url,jdbcType=VARCHAR},now(),#{teacher_id,jdbcType=INTEGER},#{video_form_id,jdbcType=INTEGER},#{video_qz,jdbcType=INTEGER},#{video_ppt,jdbcType=VARCHAR},#{video_time,jdbcType=VARCHAR})
	</insert>
	<select id="getVideoList" resultType="com.entity.VideoTab">
		select * from video_tab where video_status=5 and teacher_id=#{teacher_id,jdbcType=INTEGER} order by video_qz desc
	</select>
	<select id="getVideoById" resultType="com.entity.VideoTab">
		select * from video_tab where video_id=#{id,jdbcType=INTEGER} 
	</select>
	<select id="selVideo" resultType="com.entity.VideoTab">
		select * from video_tab 
			<where> video_status=5 
				<if test="teacher_id !='' and teacher_id !=null">
					and teacher_id=#{teacher_id,jdbcType=INTEGER}
				</if>
				<if test="video_form_id !='' and video_form_id !=null">
					and video_form_id=#{video_form_id,jdbcType=INTEGER} 
				</if>
				<if test="video_name !='' and video_name !=null">
					and video_name like CONCAT(CONCAT('%',#{video_name,jdbcType=VARCHAR}),'%')
				</if>
			</where>
			order by video_qz desc
	</select>
	<update id="delVideoById" parameterType="com.entity.VideoTab">
		update video_tab set video_status='6' where video_id=#{video_id,jdbcType=INTEGER} 
	</update>
	<update id="updetVideoById" parameterType="com.entity.VideoTab">
		update video_tab 
		set 
		video_introduce=#{video_introduce,jdbcType=VARCHAR},video_img_url=#{video_img_url,jdbcType=VARCHAR},video_form_id=#{video_form_id,jdbcType=INTEGER},video_qz=#{video_qz,jdbcType=INTEGER},video_ppt=#{video_ppt,jdbcType=VARCHAR}
		where video_id=#{video_id,jdbcType=INTEGER} 
	</update>
</mapper>