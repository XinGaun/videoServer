<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.SupplierTabDao">
	<!-- 添加厂商信息 -->
	<insert id="addSupplierTab" parameterType="com.entity.SupplierTab" useGeneratedKeys="true" keyProperty="supp_id">
		INSERT INTO
		supplier_tab(supp_logo,supp_name,supp_weight
		<if test="lock_status!=null">
			,lock_status
		</if>
		) VALUES
		(#{supp_logo},#{supp_name},#{supp_weight}
		<if test="lock_status!=null">
			,#{lock_status}
		</if>
		)
	</insert>
	<!-- 查询厂商信息 -->
	<select id="querySupplierTab" resultType="java.util.HashMap"
		parameterType="java.util.HashMap">
		SELECT supp_id,supp_logo,supp_name,supp_weight,lock_status FROM
		supplier_tab WHERE 1=1 
		<if test="supp_id!=null">
			and supp_id = #{supp_id}
		</if> 
		<if test="brand_supp_id!=null">
			and supp_id = #{brand_supp_id}
		</if> 
		<if test="comm_supp_id!=null">
			and supp_id = #{comm_supp_id}
		</if> 
		<if test="supp_name!=null">
			and supp_name = #{supp_name}
		</if>  
		<if test="lock_status!=null">
			and lock_status = #{lock_status}
		</if> 
		ORDER BY supp_weight DESC 
		LIMIT #{page} OFFSET #{nums}
	</select>
	<!-- 查询厂商信息总条数 -->
	<select id="querySupplierTabCount" resultType="int" parameterType="java.util.HashMap">
		SELECT COUNT(supp_id) FROM
		supplier_tab WHERE 1=1 
		<if test="supp_id!=null">
			and supp_id = #{supp_id}
		</if> 
		<if test="supp_name!=null">
			and supp_name = #{supp_name}
		</if>  
		<if test="lock_status!=null">
			and lock_status = #{lock_status}
		</if> 
	</select>
	<!-- 更新厂商名称信息 -->
	<update id="updateSupplierTab" parameterType="com.entity.SupplierTab">
		UPDATE supplier_tab 
		<trim prefix="set" suffixOverrides=",">
			<if test="supp_logo!=null">
				supp_logo=#{supp_logo},
			</if>
			<if test="supp_name!=null">
				supp_name=#{supp_name},
			</if>
			<if test="supp_weight!=0">
				supp_weight=#{supp_weight},
			</if>
			<if test="lock_status!=null">
				lock_status = #{lock_status},
		</if>
		</trim>
		WHERE supp_id =#{supp_id}
	</update>
	<!-- 删除厂商信息 -->
	<delete id="deleteSupplierTab" parameterType="int">
		DELETE from supplier_tab WHERE supp_id=#{supp_id}
	</delete>
</mapper>