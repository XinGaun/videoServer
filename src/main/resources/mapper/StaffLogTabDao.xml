<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.StaffLogTabDao">
	<!-- 添加员工日志信息 -->
	<insert id="addStaffLogTab" parameterType="com.entity.StaffLogTab">
		INSERT INTO
		staff_log_tab(staff_id,staff_log_api,staff_log_date
		<if test="staff_log_relatedid!=null">
			,staff_log_relatedid
		</if>
		) VALUES
		(#{staff_id},#{staff_log_api},to_timestamp(#{staff_log_date},'yyyy-mm-dd hh24:mi:ss')
		<if test="staff_log_relatedid!=null">
			,#{staff_log_relatedid}
		</if> 
		)
	</insert>
	<!-- 查询员工日志信息 -->
	<select id="queryStaffLogTab" resultType="java.util.HashMap"
		parameterType="java.util.HashMap">
		SELECT staff_log_id,staff_id,staff_log_api,to_char(staff_log_date,'yyyy-mm-dd hh24:mi:ss')staff_log_date,staff_log_relatedid FROM staff_log_tab WHERE 1=1 
		<if test="staff_log_id!=null">
			and staff_log_id = #{staff_log_id}
		</if> 
		<if test="staff_id!=null">
			and staff_id = #{staff_id}
		</if>  
		<if test="staff_log_api!=null">
			and staff_log_api = #{staff_log_api}
		</if> 
		<if test="staff_log_date!=null">
			and staff_log_date &lt;= to_timestamp(#{staff_log_date},'yyyy-mm-dd hh24:mi:ss')
		</if> 
		LIMIT #{page} OFFSET #{nums}
	</select>
	<!-- 查询员工日志信息总条数 -->
	<select id="queryStaffLogTabCount" resultType="int" parameterType="java.util.HashMap">
		SELECT COUNT(staff_log_id) FROM staff_log_tab WHERE 1=1 
		<if test="staff_log_id!=null">
			and staff_log_id = #{staff_log_id}
		</if> 
		<if test="staff_id!=null">
			and staff_id = #{staff_id}
		</if>  
		<if test="staff_log_api!=null">
			and staff_log_api = #{staff_log_api}
		</if> 
		<if test="staff_log_date!=null">
			and staff_log_date &lt;= to_timestamp(#{staff_log_date},'yyyy-mm-dd hh24:mi:ss')
		</if>
	</select>
	<!-- 更新员工日志名称信息 -->
	<update id="updateStaffLogTab" parameterType="com.entity.StaffLogTab">
		UPDATE staff_log_tab 
		<trim prefix="set" suffixOverrides=",">
			<if test="staff_id!=0">
				staff_id=#{staff_id},
			</if>
			<if test="staff_log_api!=null">
				staff_log_api=#{staff_log_api},
			</if>
			<if test="staff_log_date!=null">
				staff_log_date=to_timestamp(#{staff_log_date},'yyyy-mm-dd hh24:mi:ss'),
			</if>
			<if test="staff_log_relatedid!=null">
				staff_log_relatedid=#{staff_log_relatedid},
			</if>
		</trim>
		WHERE staff_log_id =#{staff_log_id}
	</update>
	<!-- 删除员工日志信息 -->
	<delete id="deleteStaffLogTab" parameterType="int">
		DELETE from staff_log_tab WHERE staff_log_id=#{staff_log_id}
	</delete>
</mapper>