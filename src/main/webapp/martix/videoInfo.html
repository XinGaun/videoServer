<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title></title>
<style type="text/css">
.role {
	display: none;
}
.wrap{
    width: 150px; /* 设置需要固定的宽度 */
    white-space: nowrap; /* 不换行 */
    text-overflow: ellipsis;/*  超出部分用....代替 */
    overflow: hidden; /* 超出隐藏 */
} 
table {
table-layout: fixed;
width: 1300px;
};
</style>
<link rel="stylesheet"
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
<script
	src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="assets/css/bootstrap.css" rel="stylesheet" />
<link href="assets/css/font-awesome.css" rel="stylesheet" />
<link href="assets/css/custom-styles.css" rel="stylesheet" />
<link href='http://fonts.googleapis.com/css?family=Open+Sans'
	rel='stylesheet' type='text/css' />
<link href="assets/js/dataTables/dataTables.bootstrap.css"
	  rel="stylesheet" />
<!-- oss upload -->
<link rel="stylesheet" type="text/css" href="ossupload/style.css"/>
</head>
<body>
	<div id="wrapper">
		<nav class="navbar navbar-default top-navbar" role="navigation">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".sidebar-collapse">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="index.html"><i
					class="fa fa-comments"></i> <strong><span
						style="font-size: 25px;">语道后台管理 </span></strong></a>
			</div>
			<ul class="nav navbar-top-links navbar-right">
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#" aria-expanded="false"> <i
						class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-messages">
						<li><a href="#">
								<div>
									<strong>John Doe</strong> <span class="pull-right text-muted">
										<em>Today</em>
									</span>
								</div>
								<div>Lorem Ipsum has been the industry's standard dummy
									text ever since the 1500s...</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<strong>John Smith</strong> <span class="pull-right text-muted">
										<em>Yesterday</em>
									</span>
								</div>
								<div>Lorem Ipsum has been the industry's standard dummy
									text ever since an kwilnw...</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<strong>John Smith</strong> <span class="pull-right text-muted">
										<em>Yesterday</em>
									</span>
								</div>
								<div>Lorem Ipsum has been the industry's standard dummy
									text ever since the...</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>Read
									All Messages</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-messages --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#" aria-expanded="false"> <i
						class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-tasks">
						<li><a href="#">
								<div>
									<p>
										<strong>Task 1</strong> <span class="pull-right text-muted">60%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-success"
											role="progressbar" aria-valuenow="60" aria-valuemin="0"
											aria-valuemax="100" style="width: 60%">
											<span class="sr-only">60% Complete (success)</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<p>
										<strong>Task 2</strong> <span class="pull-right text-muted">28%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-info" role="progressbar"
											aria-valuenow="28" aria-valuemin="0" aria-valuemax="100"
											style="width: 28%">
											<span class="sr-only">28% Complete</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<p>
										<strong>Task 3</strong> <span class="pull-right text-muted">60%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-warning"
											role="progressbar" aria-valuenow="60" aria-valuemin="0"
											aria-valuemax="100" style="width: 60%">
											<span class="sr-only">60% Complete (warning)</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<p>
										<strong>Task 4</strong> <span class="pull-right text-muted">85%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-danger"
											role="progressbar" aria-valuenow="85" aria-valuemin="0"
											aria-valuemax="100" style="width: 85%">
											<span class="sr-only">85% Complete (danger)</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>See
									All Tasks</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-tasks --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#" aria-expanded="false"> <i
						class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-alerts">
						<li><a href="#">
								<div>
									<i class="fa fa-comment fa-fw"></i> New Comment <span
										class="pull-right text-muted small">4 min</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-twitter fa-fw"></i> 3 New Followers <span
										class="pull-right text-muted small">12 min</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-envelope fa-fw"></i> Message Sent <span
										class="pull-right text-muted small">4 min</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-tasks fa-fw"></i> New Task <span
										class="pull-right text-muted small">4 min</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-upload fa-fw"></i> Server Rebooted <span
										class="pull-right text-muted small">4 min</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>See
									All Alerts</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-alerts --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#" aria-expanded="false"> <i
						class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-user">
						<li><a href="#"><i class="fa fa-user fa-fw"></i> User
								Profile</a></li>
						<li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
						</li>
						<li class="divider"></li>
						<li><a href="javascript:teacherLoginOut()"><i
								class="fa fa-sign-out fa-fw"></i> Logout</a></li>
					</ul> <!-- /.dropdown-user --></li>
				<!-- /.dropdown -->
			</ul>
		</nav>
		<!--/. NAV TOP  -->
		<nav class="navbar-default navbar-side" role="navigation">
			<div class="sidebar-collapse">
				<ul class="nav" id="main-menu">
					<li class="role" style="display: none;"><a href="#"><i
							class="fa fa-sitemap"></i>权限管理<span class="fa arrow"></span></a>
						<ul class="nav nav-second-level">
							<li><a href="role_list.html"><i class="fa fa-lock"></i>
									权限管理</a></li>
							<li><a href="teacher_list.html"><i class="fa fa-users"></i>
									教师管理</a></li>
							<li><a href="user_list.html"><i class="fa fa-user"></i>
									用户管理</a></li>
						</ul></li>
						<li><a href="videoformtab.html" ><i
							class="fa fa-table"></i>视频类型管理</a></li>
					<li><a href="videoInfo.html" class="active-menu"><i
							class="fa fa-table"></i>视频管理</a></li>
					<li><a href="classInfo.html"><i class="fa fa-edit"></i>课程管理</a>
					</li>				
					<li><a href="comment.html"><i class="fa fa-table"></i>评论管理</a>
					</li>
					<li class="role" style="display: none;"><a href="order.html"><i
							class="fa fa-table"></i>订单管理</a></li>
					<li class="role" style="display: none;"><a
						href="proposal.html"><i class="fa fa-edit"></i>建议管理</a></li>
					<li class="role" style="display: none;"><a href="test.html"><i
							class="fa fa-edit"></i>题目管理</a></li>
				</ul>
			</div>
		</nav>
		<!-- /. NAV SIDE  -->
		<div id="page-wrapper">
			<div id="page-inner">
				<div class="row">
					<div class="col-md-12">
						<h1 class="page-header">
							语道 <small>视频管理</small>
						</h1>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<div class="panel panel-default">
							<div class="table-responsive">
								<table class="table"
									class="display table-striped table-bordered table-hover table-condensed"
									cellspacing="0" width="100%">
									<tr>
										<td>
											<div class="input-group" width="100%">
												<span class="input-group-addon">视频名称</span> <input
													type="text" class="form-control" placeholder="请输入视频名称"
													id="video_name1">
											</div>
										</td>
										<td>
											<div class="input-group" width="100%">
												<span class="input-group-addon">视频类型</span> <select
													class="form-control"
													style="width: 200px; text-align: center;" id="video_type">

												</select>
											</div>
										</td>
									</tr>
									<tr>

									</tr>
									<tr>
										<td>
											<button type="button" class="btn btn-danger" id="removeorder"
												data-toggle="modal" data-target="#myModal">添加视频</button>
										</td>
										<td></td>
										<td></td>
										<td>
											<div style="float: right">
												<button type="button" class="btn btn-primary"
													id="queryorder">搜索</button>
												&nbsp;&nbsp; &nbsp;&nbsp;
												<button type="button" class="btn btn-warning"
													id="eliminates">清空</button>
											</div>
										</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<!-- Advanced Tables -->
						<div class="panel panel-default">

							<div class="panel-body"
								style="overflow-x: scroll; max-height: 650px;width: 99%;">
								<table   class='table table-bordered'
									style="width: 1300px;">
								<thead>
									<tr>
										<!-- <td><input type="checkbox"/></td> -->
										<td>序号</td>
										<td >视频名称</td>
										<td >视频介绍</td>
										<td>视频类型</td>
										<td >视频链接</td>
										<td >视频PPT</td>
										<td>视频权重</td>
										<td>视频时长</td>
										<td>视频评分</td>
										<td>点击次数</td>
										<td>上传时间</td>
										<td>视频修改</td>
									</tr>
									</thead>
									<tbody id="tb">
									</tbody>
								</table>
								<div>
						<span id="btn0"></span> <!-- <span>每页</span><input id="pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()" /><span> 条 </span>  -->
					   <a href="#" id="btn1">首页</a> <a href="#" id="btn2">上一页</a> 
					   <a href="#" id="btn3">下一页</a> <a href="#" id="btn4">尾页</a>&nbsp; <a>转到&nbsp;</a>
					   <input id="changePage" type="text" size="1" maxlength="4" /> <a>页&nbsp;</a><a href="#" id="btn5">跳转</a>
					</div>		
							</div>
						</div>
					</div>
				</div>
			</div>
			<input type="hidden" id="teacher_id" />
		</div>
		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
			aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="myModalLabel">课程视频添加</h4>
					</div>
					<form action="/videoServer/videoTab/uploadflv.do" method="post"
						enctype="multipart/form-data" id="dataForm">
						<div style="width: 100%;">
							<div
								style="height: 30px; background: #D9ECFF; border: 1px solid #CADEFD"></div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频标题：</div>
								<div
									style="width: 200px; height: 50px; float: left; line-height: 50px; border: 1px solid #CADEFD;">
									<input type="text" style="width: 100%; height: 100%;"
										name="videoName" id="videoName">
								</div>
								<div
									style="width: 100px;; background: #D9ECFF; float: left; text-align: right; height: 50px; line-height: 50px;">视频类型：</div>
								<div
									style="width: 130px; height: 50px; float: left; border: 1px solid #CADEFD;">
									<select style="width: 100%; text-align: center;" id="kctype">

									</select>
								</div>
							</div>
							<div style="height: 200px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 200px; line-height: 200px;">选择视频：</div>
								<!-- <input type="file" name="video" id="video" accept="video/*"> -->
								<h4>您所选择的文件列表：</h4>
                                <div id="ossfile">你的浏览器不支持flash,Silverlight或者HTML5！</div>
                                <br/>
                                <div id="container">
	                               <a id="selectfiles" href="javascript:void(0);" class='btn'>选择文件</a>
	                              <!--  <a id="postfiles" href="javascript:void(0);" class='btn'>开始上传</a> -->
                               </div>
                               <pre id="console" style="display:none;"></pre>
                            <!--    <p>&nbsp;</p> -->    
                               <input style="display:none;" name="video" id="video">                       
							    <video style="display:none;" controls="controls" oncanplaythrough="myFunction(this)" id="videoTime" ></video>								
							</div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频封面：</div>
								<input type="file" name="image" id="image" accept="image/*">
							</div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频PPT：</div>
								<input type="file" name="ppt" id="ppt">
							</div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频权重：</div>
								<div style="width: 440px; height: 50px; float: left;">
									<div style="margin-top: 25px; margin-left: 25px;">
										<input type="button" style="border-right: 0px;"
											onClick="disNum(this)" value="-"><input type="text"
											value="0" id="video_qz"
											style="width: 30px; text-align: center"
											onkeyup="value=value.replace(/[^\d]/g,'1')" /><input
											type="button" value="+" style="border-left: 0px;"
											onClick="incNum(this)">
									</div>
								</div>
							</div>
							<div style="height: 100px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 100px; line-height: 100px;">视频介绍：</div>
								<div
									style="width: 440px; height: 100px; float: left; border: 1px solid #CADEFD;">
									<textarea style="width: 100%; height: 100%;"
										name="video_introduce" id="video_introduce"></textarea>
									<input type="hidden" name="video_introduce">
								</div>
							</div>						
					 </div>
					</form>
					 <div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							id="quxiao">取消</button>
						<button type="button" class="btn btn-primary" id="sub">提交</button>
					</div> 				
				</div>
			</div>
		</div>
		<!-- /model -->
		
		<!-- Modal2 -->
		<div class="modal fade" id="updateVideoModal" tabindex="-1" role="dialog"
			aria-labelledby="updateVideoModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="myModalLabel">课程视频修改</h4>
					</div>
					<form action="/videoServer/videoTab/updetVideoById.do" method="post"
						enctype="multipart/form-data" id="updatedataForm">
						<div style="width: 100%;">
							<div
								style="height: 30px; background: #D9ECFF; border: 1px solid #CADEFD"></div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频标题：</div>
								<div
									style="width: 200px; height: 50px; float: left; line-height: 50px; border: 1px solid #CADEFD;">
									<input type="text" style="width: 100%; height: 100%;"
										name="videoName" id="updatevideoName">
								     <input type="hidden" id="updatevideoId" />
								   
								</div>
								<div
									style="width: 100px;; background: #D9ECFF; float: left; text-align: right; height: 50px; line-height: 50px;">视频类型：</div>
								<div
									style="width: 130px; height: 50px; float: left; border: 1px solid #CADEFD;">
									<select style="width: 100%; text-align: center;" id="updatekctype">

									</select>
								</div>
							</div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频封面：</div>
								<input type="file" name="updateimage" id="updateimage" accept="image/*">
							</div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频PPT：</div>
								<input type="file" name="updateppt" id="updateppt">
							</div>
							<div style="height: 50px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 50px; line-height: 50px;">视频权重：</div>
								<div style="width: 440px; height: 50px; float: left;">
									<div style="margin-top: 25px; margin-left: 25px;">
										<input type="button" style="border-right: 0px;"
											onClick="disNum(this)" value="-"><input type="text"
											value="0" id="update_video_qz"
											style="width: 30px; text-align: center"
											onkeyup="value=value.replace(/[^\d]/g,'1')" /><input
											type="button" value="+" style="border-left: 0px;"
											onClick="incNum(this)">
									</div>
								</div>
							</div>
							<div style="height: 100px; border: 1px solid #CADEFD">
								<div
									style="width: 150px; background: #D9ECFF; float: left; border: 1px solid #CADEFD; text-align: right; height: 100px; line-height: 100px;">视频介绍：</div>
								<div
									style="width: 440px; height: 100px; float: left; border: 1px solid #CADEFD;">
									<textarea style="width: 100%; height: 100%;"
										name="video_introduce" id="update_video_introduce"></textarea>
									
								</div>
							</div>
						</div>
					</form>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							id="updatequxiao">取消</button>
						<button type="button" class="btn btn-primary" id="update">提交</button>
					</div>
				</div>
			</div>
		</div>
		<!-- /model -->
	</div>
	<script src="assets/js/jquery-1.10.2.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/jquery.metisMenu.js"></script>
	<script src="assets/js/dataTables/jquery.dataTables.js"></script>
	<script src="dist/js/bootstrap-datepicker.min.js"></script>
	<script src="assets/js/dataTables/dataTables.bootstrap.js"></script>
	<script src="dist/js/bootstrap-datepicker.zh-CN.min.js"></script>
	<script src="assets/js/common.js"></script>
	<!-- oss upload -->
	<script type="text/javascript" src="ossupload/lib/crypto1/crypto/crypto.js"></script>
    <script type="text/javascript" src="ossupload/lib/crypto1/hmac/hmac.js"></script>
    <script type="text/javascript" src="ossupload/lib/crypto1/sha1/sha1.js"></script>
    <script type="text/javascript" src="ossupload/lib/base64.js"></script>
    <script type="text/javascript" src="ossupload/lib/plupload-2.3.6/js/plupload.full.min.js"></script>
    <script type="text/javascript" src="ossupload/upload.js"></script>
<script>
var pageSize = 8;    //每页显示的记录条数
var curPage=0;        //当前页
var lastPage;        //最后页
var direct=0;        //方向
var len;            //总行数
var page;            //总页数
var begin;
var end;
var datalist;//数据
$(document).ready(function () {
    $('#dataTables-example').dataTable();
});
$(function(){
	loadRoleInfo(); 
	getVideoForm();
	$.ajax({
		type : 'post',
		url : '/videoServer/videoTab/getVideoTabs.do',
		data:{name:1},
		success : function(data){	
			datalist = data;
			 getPage();
			showdata();		
 			$("#teacher_id").val(data[0].teacher_id);
		},error: function(){
			 
		}
	})
})

function getPage(){    
        
	    len = datalist.length;     
        page=len % pageSize==0 ? len/pageSize : Math.floor(len/pageSize)+1;//根据记录条数，计算页数
        // alert("page==="+page);
        curPage=1;    // 设置当前为第一页
        displayPage(1);//显示第一页        
        document.getElementById("btn0").innerHTML="当前 " + curPage + "/" + page + " 页  ";    // 显示当前多少    
              
       /*  $("#pageSizeSet").click(function setPageSize(){    // 设置每页显示多少条记录
            pageSize = document.getElementById("pageSize").value;    //每页显示的记录条数
            if (!/^[1-9]\d*$/.test(pageSize)) {
                alert("请输入正整数");
                return ;
            }
            len =$("#mytable tr").length - 1;
            page=len % pageSize==0 ? len/pageSize : Math.floor(len/pageSize)+1;//根据记录条数，计算页数
            curPage=1;        //当前页
             direct=0;        //方向
             firstPage();
        });	          */
        	   
    }
	  $("#btn1").click(function firstPage(){    // 首页
          curPage=1;
          direct = 0;
          displayPage();
          showdata();
      });
      $("#btn2").click(function frontPage(){    // 上一页
          direct=-1;
          displayPage();
          showdata();
      });
      $("#btn3").click(function nextPage(){    // 下一页
          direct=1;
          displayPage();
          showdata();
      });
      $("#btn4").click(function lastPage(){    // 尾页
          curPage=page;
          direct = 0;
          displayPage();
          showdata();
      });
      $("#btn5").click(function changePage(){    // 转页
          curPage=document.getElementById("changePage").value * 1;
          if (!/^[1-9]\d*$/.test(curPage)) {
              alert("请输入正整数");
              return ;
          }
          if (curPage > page) {
              alert("超出数据页面");
              return ;
          }
          direct = 0;
          displayPage();
          showdata();
      });
      
	 function displayPage(){
         if(curPage <=1 && direct==-1){
             direct=0;
             alert("已经是第一页了");
             return;
         } else if (curPage >= page && direct==1) {
             direct=0;
             alert("已经是最后一页了");
             return ;
         }        
         lastPage = curPage;      
         // 修复当len=1时，curPage计算得0的bug
         if (len > pageSize) {
             curPage = ((curPage + direct + len) % len);
         } else {
             curPage = 1;
         }
   
         document.getElementById("btn0").innerHTML="当前 " + curPage + "/" + page + " 页  ";        // 显示当前多少页         
         begin=(curPage-1)*pageSize + 1;// 起始记录号
         end = begin + 1*pageSize - 1;    // 末尾记录号
         
         if(end > len ) end=len;
       /*   $("#mytable tr").hide();    // 首先，设置这行为隐藏
         $("#mytable tr").each(function(i){    // 然后，通过条件判断决定本行是否恢复显示
             if((i>=begin && i<=end) || i==0 )//显示begin<=x<=end的记录
                 $(this).show();
         }); */

      } 
	 function showdata(){
		 $("#tb").empty(); 		
		 for(var i=begin-1;i<end;i++){							
				var videoformname = datalist[i].video_form_class+datalist[i].video_form_name;
				$("#tb").append("<tr><td>"+(i+1)+"</td><td class='wrap' title='"+datalist[i].video_name+"'>"+datalist[i].video_name+"</td><td class='wrap' title='"+datalist[i].video_introduce+"'>"+datalist[i].video_introduce+"</td><td>"+videoformname+"</td><td class='wrap' title='"+datalist[i].video_url+"'>"+datalist[i].video_url+"</td><td class='wrap' title='"+datalist[i].video_ppt+"'>"+datalist[i].video_ppt+"</td><td>"+datalist[i].video_qz+"</td><td>"+datalist[i].video_time+"</td><td>"+datalist[i].video_grade+"</td><td>"+datalist[i].video_click+"</td><td>"+datalist[i].video_date+"</td><td><button class='btn btn-danger btn-sm' data-toggle='modal' data-target='#updateVideoModal' data-videoid='"+datalist[i].video_id+"'>视频修改</button></td></tr>")							
			}
	 }
	 
function updat(obj){
	var orderId=$(obj).html();
	var d=0;
 	if ((navigator.userAgent.indexOf('MSIE') >= 0) && (navigator.userAgent.indexOf('Opera') < 0)){
 		d=orderId.substring(67,orderId.length-2)
 	}
 	if (navigator.userAgent.indexOf('Firefox') >= 0){
 		d=orderId.substring(53,orderId.length-16)
 	}else{
 		d=orderId.substring(67,orderId.length-2);
 	}
	window.location.href="updateVideo.html?video_id="+d;
}
function delet(obj){
	var orderId=$(obj).html();
	var d=0;
 	if ((navigator.userAgent.indexOf('MSIE') >= 0) && (navigator.userAgent.indexOf('Opera') < 0)){
 		d=orderId.substring(67,orderId.length-2)
 	}
 	if (navigator.userAgent.indexOf('Firefox') >= 0){
 		d=orderId.substring(46,orderId.length-16)
 	}else{
 		d=orderId.substring(67,orderId.length-2);
 	}
	$.ajax({
       	type : 'post',
       	url : '/videoServer/videoTab/delVideoById.do?',
       	data : {video_id:d},
       	success : function(){
       		alert("删除成功！");
       		window.location.href="";
       	}
    })
}
function getId(obj){
	var orderId=$(obj).html();
	var d=0;
 	if ((navigator.userAgent.indexOf('MSIE') >= 0) && (navigator.userAgent.indexOf('Opera') < 0)){
 		d=orderId.substring(60,orderId.length-2)
 	}
 	if (navigator.userAgent.indexOf('Firefox') >= 0){
 		d=orderId.substring(46,orderId.length-16)
 	}else{
 		d=orderId.substring(60,orderId.length-2);
 	}
	$.ajax({
       	type : 'post',
       	url : '/videoServer/videoTab/getVideoById.do?',
       	data : {id:d},
       	success : function(data){
       		window.location.href="player.html?video_url="+data[0].video_id;
       	}
    })
}	
</script>
<script>	
	 $('#myModal').on('show.bs.modal', function (event) {      	   
   	  $("#videoName").val("");
   	  $("#video_introduce").val("");
	  
   }); 	
	$("#queryorder").click(function(){
		$.ajax({
			type : 'post',
			data : {teacher_id:$.trim($("#teacher_id").val()),video_form_id:$.trim($("#video_type").val()),video_name:$.trim($("#video_name1").val())},
			url : '/videoServer/videoTab/selVideo.do',
			success : function(data){
				if(data.length==0){
			 		alert("暂无符合条件的视频");
			 	}else{
			 		$("#tb  tr:not(:first)").html("");
			 		datalist = data;
					 getPage();
					showdata();
			 		/* for(var i=0;i<data.length;i++){
						var videoformname = data[i].video_form_class+data[i].video_form_name;
						$("#tb").append("<tr><td>"+(i+1)+"</td><td class='wrap' title='"+data[i].video_name+"'>"+data[i].video_name+"</td><td class='wrap' title='"+data[i].video_introduce+"'>"+data[i].video_introduce+"</td><td>"+videoformname+"</td><td class='wrap' title='"+data[i].video_url+"'>"+data[i].video_url+"</td><td class='wrap' title='"+data[i].video_ppt+"'>"+data[i].video_ppt+"</td><td>"+data[i].video_qz+"</td><td>"+data[i].video_time+"</td><td>"+data[i].video_grade+"</td><td>"+data[i].video_click+"</td><td>"+data[i].video_date+"</td><td><button class='btn btn-danger btn-sm' data-toggle='modal' data-target='#updateVideoModal' data-videoid='"+data[i].video_id+"'>视频修改</button></td></tr>")
					} */
					//$("#teacher_id").val(data[0].teacher_id);
				}
			},error: function(){
				 
			}
		})
	});
	
	$("#eliminates").click(function(){	
		window.location.href="";
	});
	function getVideoForm(){
		$.ajax({
			type: "POST",
			url : '/videoServer/videoFormTab/getVideoList.do',
			data:{name:1},
			cache: false,  //禁用缓存
            dataType: "json",
			success : function(data){
				$("#kctype").empty(); 
				$("#video_type").empty();
				$("#updatekctype").empty();
				for (var i = 0; i < data.length; i++) {						
			    	$("#kctype").append("<option value="+data[i].video_form_id+">"+data[i].video_form_class+data[i].video_form_name+"</option>");			    	
			    	$("#video_type").append("<option value="+data[i].video_form_id+">"+data[i].video_form_class+data[i].video_form_name+"</option>");
			    	$("#updatekctype").append("<option value="+data[i].video_form_id+">"+data[i].video_form_class+data[i].video_form_name+"</option>");
				}
			},error: function(){
				alert("VideoForm error"); 
			}
		});
	};
	
	//视频修改   加载模态框    
    $('#updateVideoModal').on('show.bs.modal', function (event) {   
    	  var button = $(event.relatedTarget) // 触发事件的按钮  
          var videoid = button.data('videoid') // 解析出data-whatever内容  
    	  $("#updatevideoId").val(videoid);
    	$.ajax({
			type : 'post',		
			url : '/videoServer/videoTab/getVideoById.do',
			data:{id:videoid},		   
	        dataType: "json",
			success : function(data){										
				 $("#updatevideoName").val(data[0].video_name);
				 $("#update_video_introduce").val(data[0].video_introduce);
				 
			},error: function(){
				 alert("get error");
			}				
		});	 			
 	 
 	  
    }); 
	 $("#update").click(function(){
			//表单参数
			 var formData = new FormData();  //重点：要用这种方法接收表单的参数  	
			 var videoName = $.trim($('#updatevideoName').val());  
			 var video_introduce =$.trim($("#update_video_introduce").val());
			 var video_form_id = $.trim($("#updatekctype").val());					
			 var image = $('#updateimage').prop("files")[0];
			 var ppt = $('#updateppt').prop("files")[0];
			 var video_qz = $.trim($("#update_video_qz").val());	
		     var video_id =  $.trim($("#updatevideoId").val());
			 formData.append("video_id", video_id);
			 formData.append("videoName",videoName);  		
			 formData.append("image", image);
			 formData.append("video_introduce", video_introduce);
			 formData.append("video_form_id", video_form_id);
			 formData.append("ppt", ppt);	
			 formData.append("video_qz", video_qz);
						
		    //上传文件		
			$.ajax({
					type : 'post',
					data : formData,
					url : '/videoServer/videoTab/updetVideoById.do',
					contentType: false, 
			        processData: false, 
					success : function(data){										
						alert("修改成功");			        					
				        $("#updateVideoModal").modal("hide");
						window.location.href="";					
					},error: function(){
						 alert("submit error");
					}				
				});	 				
	      });
</script>
	<script>
function updat(obj){
	
}
	function disNum(dom){
		var disNum=dom.nextSibling.value;
		if(disNum<1)//防止数量少于1
		{
			dom.nextSibling.value=0;
		}
		else
		{
			dom.nextSibling.value--;
		}
	}
	
	function incNum(dom){
		dom.previousSibling.value ++;
	}
</script>
	<script src="assets/js/custom-scripts.js"></script>
</body>
</html>
