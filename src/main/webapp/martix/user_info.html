<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title></title>
		<!-- Bootstrap Styles-->
		<link href="assets/css/bootstrap.css" rel="stylesheet" />
		<!-- FontAwesome Styles-->
		<link href="assets/css/font-awesome.css" rel="stylesheet" />
		<!-- Morris Chart Styles-->

		<!-- Custom Styles-->
		<link href="assets/css/custom-styles.css" rel="stylesheet" />
		<!-- Google Fonts-->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
		<!-- TABLE STYLES-->
		<link href="assets/js/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
		<link href="dist/css/bootstrap-datepicker3.min.css" rel="stylesheet" />
		<style>
			.addmargin {
				margin-top: 10px;
			}
		</style>
	</head>

	<body>
		<div id="wrapper">
			<nav class="navbar navbar-default top-navbar" role="navigation">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html"><i class="fa fa-comments"></i> <strong>语道后台管理 </strong></a>
				</div>

				<ul class="nav navbar-top-links navbar-right">
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-messages">
							<li>
								<a href="#">
									<div>
										<strong>John Doe</strong>
										<span class="pull-right text-muted">
											<em>Today</em>
										</span>
									</div>
									<div>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s...</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<strong>John Smith</strong>
										<span class="pull-right text-muted">
											<em>Yesterday</em>
										</span>
									</div>
									<div>Lorem Ipsum has been the industry's standard dummy text ever since an kwilnw...</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<strong>John Smith</strong>
										<span class="pull-right text-muted">
											<em>Yesterday</em>
										</span>
									</div>
									<div>Lorem Ipsum has been the industry's standard dummy text ever since the...</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a class="text-center" href="#">
									<strong>Read All Messages</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
						<!-- /.dropdown-messages -->
					</li>
					<!-- /.dropdown -->
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-tasks">
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 1</strong>
											<span class="pull-right text-muted">60% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
												<span class="sr-only">60% Complete (success)</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 2</strong>
											<span class="pull-right text-muted">28% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="28" aria-valuemin="0" aria-valuemax="100" style="width: 28%">
												<span class="sr-only">28% Complete</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 3</strong>
											<span class="pull-right text-muted">60% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
												<span class="sr-only">60% Complete (warning)</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 4</strong>
											<span class="pull-right text-muted">85% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" style="width: 85%">
												<span class="sr-only">85% Complete (danger)</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a class="text-center" href="#">
									<strong>See All Tasks</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
						<!-- /.dropdown-tasks -->
					</li>
					<!-- /.dropdown -->
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-alerts">
							<li>
								<a href="#">
									<div>
										<i class="fa fa-comment fa-fw"></i> New Comment
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-twitter fa-fw"></i> 3 New Followers
										<span class="pull-right text-muted small">12 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-envelope fa-fw"></i> Message Sent
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-tasks fa-fw"></i> New Task
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-upload fa-fw"></i> Server Rebooted
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a class="text-center" href="#">
									<strong>See All Alerts</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
						<!-- /.dropdown-alerts -->
					</li>
					<!-- /.dropdown -->
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li>
								<a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
							</li>
							<li>
								<a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
							</li>
						</ul>
						<!-- /.dropdown-user -->
					</li>
					<!-- /.dropdown -->
				</ul>
			</nav>
			<!--/. NAV TOP  -->
			<nav class="navbar-default navbar-side" role="navigation">
				<div class="sidebar-collapse">
					<ul class="nav" id="main-menu">
						<li>
							<a href="#"><i class="fa fa-sitemap" class="active-menu"></i>权限管理<span class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
								<li>
							<a href="role_list.html"  ><i class="fa fa-lock"></i> 权限管理</a>
						</li>
						<li>
							<a href="teacher_list.html"><i class="fa fa-users"></i> 教师管理</a>
						</li>
						<li>
							<a href="user_list.html"><i class="fa fa-user"></i> 用户管理</a>
						</li>
							</ul>
						</li>
						<li>
                        <a href="videoInfo.html"><i class="fa fa-table"></i>视频管理</a>
                    </li>
                    <li>
                        <a href="classInfo.html"><i class="fa fa-edit"></i>课程管理</a>
                    </li>
                    <li>
                        <a href="taocanInfo.html"><i class="fa fa-sitemap"></i>套餐管理</a>
                    </li>
                    <li>
							<a href="coupon.html"><i class="fa fa-qrcode"></i>优惠券管理</a>
						</li>
						
						<li>
							<a href="order.html" ><i class="fa fa-table"></i>订单管理</a>
						</li>
						<li>
							<a href="proposal.html" ><i class="fa fa-edit"></i>建议管理</a>
						</li>
						<li><a href="test.html" ><i
							class="fa fa-edit"></i>题目管理</a></li>
					</ul>

				</div>

			</nav>
			<!-- /. NAV SIDE  -->

			<div id="page-wrapper">
				<div id="page-inner">
					<div class="row">
						<div class="col-md-12">
							<h3 class="page-header">
							语道 <small>用户管理</small>
						</h3>
						</div>
					</div>
					<!-- /. ROW  -->

					<div class="row">
						<div class="col-md-12">

							<!-- Advanced Tables -->
							<div class="panel panel-default">
								<div class="panel-body">
									<!--
                	作者：offline
                	时间：2018-06-09
                	描述：context begin
                -->
									<div class="row">
										<div class="col-sm-12">
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">姓名:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="user_name">
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">性别:</span>
												</div>
												<div class="col-sm-8">
													<select id="user_sex">
														<option value="3">男</option>
														<option value="4">女</option>
													</select>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">电话:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="user_phone">
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">邮箱:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="user_mail">
												</div>
											</div>

											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">状态:</span>
												</div>
												<div class="col-sm-8">
													<select id="user_status">
														<option value="6">禁用</option>
														<option value="5">正常</option>
													</select>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">录入日期:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="user_date" readonly="readonly">
													<input type="hidden" id="user_imgurl">
													<input type="hidden" id="user_id">
												</div>
											</div>

											<div class="row addmargin">
												<div class="col-sm-4 col-sm-offset-4">
													<button id="modifyInfo" class="btn btn-primary">修改</button>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
													<button id="backBtn" class="btn btn-success">返回</button>
													<!--<button class="btn btn-primary">提交</button>-->
												</div>

											</div>
										</div>
									</div>
									<!--
                	作者：offline
                	时间：2018-06-09
                	描述：end context
                -->
								</div>
							</div>
							<!--End Advanced Tables -->
						</div>
					</div>

				</div>

			</div>
			<!-- /. PAGE INNER  -->
		</div>
		<!-- /. PAGE WRAPPER  -->
		<!-- /. WRAPPER  -->
		<!-- JS Scripts-->
		<!-- jQuery Js -->
		<script src="assets/js/jquery-1.10.2.js"></script>
		<!-- Bootstrap Js -->
		<script src="assets/js/bootstrap.min.js"></script>
		<!-- Metis Menu Js -->
		<script src="assets/js/jquery.metisMenu.js"></script>
		<!-- DATA TABLE SCRIPTS -->
		<script src="assets/js/dataTables/jquery.dataTables.js"></script>
		<script src="assets/js/dataTables/dataTables.bootstrap.js"></script>
		<script src="dist/js/bootstrap-datepicker.min.js"></script>
		<script src="dist/js/bootstrap-datepicker.zh-CN.min.js"></script>

		<script>
			//var url = "http://localhost:8080/videoServer/";
			var url = "/videoServer/";
			$(function() {
				init();

				function init() {
					loadData();
				}

				function loadData() {
					var currentUrl = this.location.href;
					var id = currentUrl.substr(currentUrl.indexOf("=") + 1);
					$("#user_id").val(id);
					$.ajax({
						type: "POST",
						url: url + "user/queryUserAll",
						datatype: 'json',
						cache: false, //禁用缓存
						data: {
							"user_id": id
						},
						dataType: "json",
						success: function(data) {
							if(data.listObject.length == 1) { //加载成功
								//添加数据
								adduserInfo(data.listObject[0]);
							} else {
								alert("系统有误,加载信息失败!");
							}
						}
					});
				}

				//显示数据
				function adduserInfo(data) {
					$("#user_name").val(data.user_name);
					$("#user_phone").val(data.user_phone);
					$("#user_mail").val(data.user_email);
					$("#user_date").val(data.user_date);
					$("#user_imgurl").val(data.user_photo);
					
					var status = 6;
					if(data.user_status == '正常'){
						status = 5;
					}
					var sex = 4;
					if(data.user_sex == '男'){
						sex = 3;
					}
					backSelect("user_status",status);
					backSelect("user_sex",sex);
				}

				function backSelect(eleId,status){
					 $("#"+eleId+" option").each(function(){   
				          var txt = $(this).val();   
				          if(txt==status){  
				               this.selected = "selected";
				          }  
				     }) 
				}
				//提交修改信息
				$('#modifyInfo').click(function() {
					$.ajax({
						type: "POST",
						url: url + "user/modifyInfo",
						datatype: 'json',
						cache: false, //禁用缓存
						data: {
							"user_id": $("#user_id").val(),
							"user_name": $("#user_name").val(),
							"user_sex": $("#user_sex").val(),
							"user_phone": $("#user_phone").val(),
							"user_email": $("#user_mail").val(),
							"user_date": $("#user_date").val(),
							"user_status": $("#user_status").val(),
							"user_photo": $("#user_imgurl").val(),
						},
						dataType: "json",
						success: function(data) {
							if(data.retCode == 1) { //修改成功
								//页面跳转
								window.location.href="user_list.html";
							} else {
								alert(data.retMsg);
							}
						}
					});
				});
				
				$('#backBtn').click(function(){
					window.location.go(-1);
				})
				
				//日期控件
				$("#sandbox-container .input-daterange").datepicker({
					language: "zh-CN",
					format: 'yyyy-mm-dd'
				});

				$(".checkall").click(function() {
					var check = $(this).prop("checked");
					$(".checkchild").prop("checked", check);
				});
			});
		</script>
		<!-- Custom Js -->
		<script src="assets/js/custom-scripts.js"></script>

	</body>

</html>