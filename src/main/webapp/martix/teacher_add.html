<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title></title>
		<!-- Bootstrap Styles-->
		<link href="assets/css/bootstrap.css" rel="stylesheet" />
		<!-- FontAwesome Styles-->
		<link href="assets/css/font-awesome.css" rel="stylesheet" />
		<!-- Morris Chart Styles-->

		<!-- Custom Styles-->
		<link href="assets/css/custom-styles.css" rel="stylesheet" />
		<!-- Google Fonts-->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
		<!-- TABLE STYLES-->
		<link href="assets/js/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
		<link href="dist/css/bootstrap-datepicker3.min.css" rel="stylesheet" />
		<style>
			.addmargin {
				margin-top: 10px;
			}
		</style>
	</head>

	<body>
		<div id="wrapper">
			<nav class="navbar navbar-default top-navbar" role="navigation">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html"><i class="fa fa-comments"></i> <strong>语道后台管理 </strong></a>
				</div>

				<ul class="nav navbar-top-links navbar-right">
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-messages">
							<li>
								<a href="#">
									<div>
										<strong>John Doe</strong>
										<span class="pull-right text-muted">
											<em>Today</em>
										</span>
									</div>
									<div>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s...</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<strong>John Smith</strong>
										<span class="pull-right text-muted">
											<em>Yesterday</em>
										</span>
									</div>
									<div>Lorem Ipsum has been the industry's standard dummy text ever since an kwilnw...</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<strong>John Smith</strong>
										<span class="pull-right text-muted">
											<em>Yesterday</em>
										</span>
									</div>
									<div>Lorem Ipsum has been the industry's standard dummy text ever since the...</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a class="text-center" href="#">
									<strong>Read All Messages</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
						<!-- /.dropdown-messages -->
					</li>
					<!-- /.dropdown -->
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-tasks">
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 1</strong>
											<span class="pull-right text-muted">60% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
												<span class="sr-only">60% Complete (success)</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 2</strong>
											<span class="pull-right text-muted">28% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="28" aria-valuemin="0" aria-valuemax="100" style="width: 28%">
												<span class="sr-only">28% Complete</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 3</strong>
											<span class="pull-right text-muted">60% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
												<span class="sr-only">60% Complete (warning)</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<p>
											<strong>Task 4</strong>
											<span class="pull-right text-muted">85% Complete</span>
										</p>
										<div class="progress progress-striped active">
											<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" style="width: 85%">
												<span class="sr-only">85% Complete (danger)</span>
											</div>
										</div>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a class="text-center" href="#">
									<strong>See All Tasks</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
						<!-- /.dropdown-tasks -->
					</li>
					<!-- /.dropdown -->
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-alerts">
							<li>
								<a href="#">
									<div>
										<i class="fa fa-comment fa-fw"></i> New Comment
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-twitter fa-fw"></i> 3 New Followers
										<span class="pull-right text-muted small">12 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-envelope fa-fw"></i> Message Sent
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-tasks fa-fw"></i> New Task
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">
									<div>
										<i class="fa fa-upload fa-fw"></i> Server Rebooted
										<span class="pull-right text-muted small">4 min</span>
									</div>
								</a>
							</li>
							<li class="divider"></li>
							<li>
								<a class="text-center" href="#">
									<strong>See All Alerts</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
						<!-- /.dropdown-alerts -->
					</li>
					<!-- /.dropdown -->
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
							<i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li>
								<a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
							</li>
							<li>
								<a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="javascript:teacherLoginOut()"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
							</li>
						</ul>
						<!-- /.dropdown-user -->
					</li>
					<!-- /.dropdown -->
				</ul>
			</nav>
			<!--/. NAV TOP  -->
			<nav class="navbar-default navbar-side" role="navigation">
				<div class="sidebar-collapse">
					<ul class="nav" id="main-menu">
						<li class="role" style="display: none;">
							<a href="#"><i class="fa fa-sitemap"  class="active-menu"></i>权限管理<span class="fa arrow"></span></a>
							<ul class="nav nav-second-level collapse in">
								<li>
									<a href="role_list.html" ><i class="fa fa-lock"></i> 权限管理</a>
								</li>
								<li>
									<a href="teacher_list.html" class="active-menu"><i class="fa fa-users"></i> 教师管理</a>
								</li>
								<li>
									<a href="user_list.html"><i class="fa fa-user"></i> 用户管理</a>
								</li>
							</ul>
						</li>
						<li>
	                        <a href="videoInfo.html"><i class="fa fa-table"></i>视频管理</a>
	                    </li>
	                    <li>
	                        <a href="classInfo.html"><i class="fa fa-edit"></i>课程管理</a>
	                    </li>
	                    <li>
	                        <a href="taocanInfo.html"><i class="fa fa-sitemap"></i>套餐管理</a>
	                    </li>
						<li class="role" style="display: none;">
							<a href="coupon.html"><i class="fa fa-qrcode"></i>优惠券管理</a>
						</li>
						<li>
							<a href="comment.html"><i class="fa fa-table"></i>评论管理</a>
						</li>
						<li class="role" style="display: none;">
							<a href="order.html"><i class="fa fa-table"></i>订单管理</a>
						</li>
						<li class="role" style="display: none;">
							<a href="proposal.html"><i class="fa fa-edit"></i>建议管理</a>
						</li>
						<li class="role" style="display: none;">
							<a href="test.html" ><i class="fa fa-edit"></i>题目管理</a>
						</li>
					</ul>
				</div>

			</nav>
			<!-- /. NAV SIDE  -->

			<div id="page-wrapper">
				<div id="page-inner">
					<div class="row">
						<div class="col-md-12">
							<h3 class="page-header">
							语道 <small>教师管理</small>
						</h3>
						</div>
					</div>
					<!-- /. ROW  -->

					<div class="row">
						<div class="col-md-12">

							<!-- Advanced Tables -->
							<div class="panel panel-default">
								<div class="panel-body">
									<!--
                	作者：offline
                	时间：2018-06-09
                	描述：context begin
                -->
									<div class="row">
										<div class="col-sm-12">
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span style="color: red;">*</span><span class="">姓名:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="teacher_name" placeholder="请输入用户姓名!">
													&nbsp;&nbsp;&nbsp;&nbsp;<span id="errorNameInfo" style="color: red;"></span>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span style="color: red;">*</span><span class="">电话:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="teacher_phone" placeholder="请输入联系电话!">
													&nbsp;&nbsp;&nbsp;&nbsp;<span id="errorPhoneInfo" style="color: red;"></span>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">邮箱:</span>
												</div>
												<div class="col-sm-8">
													<input type="text" id="teacher_mail" placeholder="请输入邮箱">
													&nbsp;&nbsp;&nbsp;&nbsp;<span id="errorEmailInfo" style="color: red;"></span>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span style="color: red;">*</span><span class="">登录密码:</span>
												</div>
												<div class="col-sm-8">
													<input type="password" id="teacher_pwd" placeholder="请输入登录密码!">
													&nbsp;&nbsp;&nbsp;&nbsp;<span id="errorPwdInfo" style="color: red;"></span>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span style="color: red;">*</span><span class="">请再次确认密码:</span>
												</div>
												<div class="col-sm-8">
													<input type="password" id="re_teacher_pwd"  placeholder="请重复输入密码!">
													&nbsp;&nbsp;&nbsp;&nbsp;<span id="errorRepwdInfo" style="color: red;"></span>
												</div>
											</div>

											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">状态:</span>
												</div>
												<div class="col-sm-8">
													<select id="teacher_status">
														<option value="6">禁用</option>
														<option value="5">正常</option>
													</select>
												</div>
											</div>
											<div class="row addmargin">
												<div class="col-sm-4" align="right" style="line-height:-moz-block-height;">
													<span class="">教师简介:</span>
												</div>
												<div class="col-sm-8">
													<input type="hidden" id="teacher_imgurl">
													<textarea id="teacher_introduce" cols="40" rows="5"></textarea>
												</div>
											</div>

											<div class="row addmargin">
												<div class="col-sm-4 col-sm-offset-4">
													<button id="addTeacherInfo" class="btn btn-success">提交</button>
													&nbsp;&nbsp;&nbsp;&nbsp;(<span style="color: red;">*</span>代表为必填项)
												</div>

											</div>
										</div>
									</div>
									<!--
                	作者：offline
                	时间：2018-06-09
                	描述：end context
                -->
								</div>
							</div>
							<!--End Advanced Tables -->
						</div>
					</div>

				</div>

			</div>
			<!-- /. PAGE INNER  -->
		</div>
		<!-- /. PAGE WRAPPER  -->
		<!-- /. WRAPPER  -->
		<!-- JS Scripts-->
		<!-- jQuery Js -->
		<script src="assets/js/jquery-1.10.2.js"></script>
		<!-- Bootstrap Js -->
		<script src="assets/js/bootstrap.min.js"></script>
		<!-- Metis Menu Js -->
		<script src="assets/js/jquery.metisMenu.js"></script>
		<!-- DATA TABLE SCRIPTS -->
		<script src="assets/js/dataTables/jquery.dataTables.js"></script>
		<script src="assets/js/dataTables/dataTables.bootstrap.js"></script>
		<script src="dist/js/bootstrap-datepicker.min.js"></script>
		<script src="dist/js/bootstrap-datepicker.zh-CN.min.js"></script>
		<script src="assets/js/common.js"></script>
		

		<script>
			//var url = "http://localhost:8080/videoServer/";
			var url ="/videoServer/";
			$(function() {
				loadRoleInfo();
				function backSelect(eleId,status){
					 $("#"+eleId+" option").each(function(){   
				          var txt = $(this).val();   
				          if(txt==status){  
				               this.selected = "selected";
				          }  
				     }) 
				 }
				
				//电话号码格式判断与判重
				$("#teacher_phone").blur(function(){
					
					if(!checkPhone()){
						$("#errorPhoneInfo").text("*输入手机号码格式错误!*");
						return;
					}
					$.ajax({
							type: "POST",
							url: url+"teacher/queryTeacherAll",
							datatype:'json',
							cache: false,  //禁用缓存
							data: {
								"teacher_phone":$(this).val()
							},  
							dataType: "json",
							success: function (data) {
								if(data.listObject.length == 1){	//电话号码重复
									$("#errorPhoneInfo").text("*所输入电话号码已被注册!*");
								}
							}
					});
				})
				//取消电话错误提示
				$("#teacher_phone").focus(function(){
					$("#errorPhoneInfo").text("");
				})
				//电话格式验证
				function checkPhone(){
					var reg = /^1[3|5|8]\d{9}$/;
					var phone = $("#teacher_phone").val();
					if(!reg.test(phone)){
						return false;
					}
					return true;
				}
				//邮箱格式
				$("#teacher_mail").blur(function(){
					if(!checkEmail()){
						$("#errorEmailInfo").text("*输入邮箱格式错误!*");
					}
				})
				//判断邮箱
				function checkEmail(){
					var reg = new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");
					var email = $("#teacher_mail").val();
					if(!reg.test(email)){
						return false;
					}
					return true;
				}
				
				//取消邮箱提示
				$("#teacher_mail").focus(function(){
					$("#errorEmailInfo").text("");
				})
				//取消邮箱提示
				$("#teacher_name").focus(function(){
					$("#errorNameInfo").text("");
				})
				//检查两次密码输入是否一致
				$("#re_teacher_pwd").blur(function(){
					if(!checkRePwd()){
						$("#errorRepwdInfo").text("*两次密码输入不一致!*");
					}
				});
				//清空提示
				$("#re_teacher_pwd").focus(function(){
					$("#errorRepwdInfo").text("");
				})
				//清空提示
				$("#teacher_pwd").focus(function(){
					$("#errorPwdInfo").text("");
				})
				function checkRePwd(){
					var pwd = $("#teacher_pwd").val();
					var re_pwd = $("#re_teacher_pwd").val();
					if(pwd != re_pwd){
						return false;
					}
					return true;
				}
				//提交前检查
				function checkInfo(){
					if($("#teacher_name").val() === ""){
						$("#errorNameInfo").text("*输入姓名不能为空!*");
						return false;
					}
					if(!checkPhone()){
						$("#errorPhoneInfo").text("*输入手机号码格式错误!*");
						return false;
					}
					if($("#teacher_pwd").val() === ""){
						$("#errorPwdInfoeInfo").text("*输入密码不能为空!*");
						return false;
					}
					if(!checkRePwd()){
						$("#errorRepwdInfo").text("*两次密码输入不一致!*");
						return false;
					}
					return true;
				}
				
				//提交添加信息
				$('#addTeacherInfo').click(function() {
					if(!checkInfo()){
						return;
					};
					$.ajax({
						type: "POST",
						url: url + "teacher/addTeacherInfo",
						datatype: 'json',
						cache: false, //禁用缓存
						data: {
							"teacher_name": $("#teacher_name").val(),
							"teacher_phone": $("#teacher_phone").val(),
							"teacher_mail": $("#teacher_mail").val(),
							"teacher_pwd": $("#teacher_pwd").val(),
							"teacher_status": $("#teacher_status").val(),
							"teacher_imgurl": $("#teacher_imgurl").val(),
							"teacher_introduce": $("#teacher_introduce").val()
						},
						dataType: "json",
						success: function(data) {
							if(data.retCode == 1) { //添加成功
								//页面跳转
								window.location.href="teacher_list.html";
							} else {
								alert("系统有误,修改教师信息失败!");
							}
						}
					});
				});
				//数据检查
				
				//日期控件
				$("#sandbox-container .input-daterange").datepicker({
					language: "zh-CN",
					format: 'yyyy-mm-dd'
				});

				$(".checkall").click(function() {
					var check = $(this).prop("checked");
					$(".checkchild").prop("checked", check);
				});
			});
		</script>
		<!-- Custom Js -->
		<script src="assets/js/custom-scripts.js"></script>

	</body>

</html>