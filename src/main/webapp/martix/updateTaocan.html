<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="js/jquery-3.3.1.min.js"></script>
</head>
<body>
	<div>
		<form action="/videoServer/videoTab/uploadflv1.do" method="post">
			<div style="margin:0 auto;width:600px;border:1px solid blue">
				<div style="height:30px;background:#D9ECFF;border:1px solid #CADEFD"></div>
				<div style="height:50px;border:1px solid #CADEFD">
					<div style="width:150px;background:#D9ECFF;float:left;border:1px solid #CADEFD;text-align:right;height:50px;line-height:50px;">套餐标题：</div>
					<div style="width:200px;height:50px;float:left;line-height:50px;border:1px solid #CADEFD;">
						&nbsp;<input type="text" id="video_name"/>
					</div>
					<div style="width:100px;background:#D9ECFF;float:left;border:1px solid #CADEFD;text-align:right;height:50px;line-height:50px;">套餐价格：</div>
					<div style="width:100px;height:50px;float:left;line-height:50px;">
						&nbsp;<input style="width:80px;"type="text" id="combo_price"/>
					</div>
				</div>
				<div style="height:200px;border:1px solid #CADEFD">
					<div style="width:150px;background:#D9ECFF;float:left;border:1px solid #CADEFD;text-align:right;height:200px;line-height:50px;">选择套餐：</div>
					<div style="width:440px;height:200px;float:left;overflow:scroll;">
						<table id="courses_video" class='table table-bordered'></table>
					</div>
				</div>
				<div style="height:50px;border:1px solid #CADEFD">
					<div style="width:150px;background:#D9ECFF;float:left;border:1px solid #CADEFD;text-align:right;height:50px;line-height:50px;">套餐封面：</div>
					<div style="width:440px;height:50px;float:left;line-height:50px;">
						&nbsp;<input type="file" id="video_img_url"><input type="hidden" name="video_img_url">
					</div>
				</div>
				<div style="height:100px;border:1px solid #CADEFD">
					<div style="width:150px;background:#D9ECFF;float:left;border:1px solid #CADEFD;text-align:right;height:100px;line-height:100px;">套餐介绍：</div>
					<div style="width:440px;height:100px;float:left;">
						&nbsp;<textarea  style="width:250px;margin-top:25px;height:50px;" id="video_introduce"></textarea><input type="hidden" name="video_introduce">
					</div>
				</div>
				<div style="height:50px;border:1px solid #CADEFD">
					<div style="width:150px;background:#D9ECFF;float:left;border:1px solid #CADEFD;text-align:right;height:50px;line-height:50px;"></div>
					<div style="width:440px;height:50px;float:left;line-height:50px;">
						&nbsp;<input type="button" onclick="updat()" value="修改">&nbsp;&nbsp;<a href="javascript:history.back(-1)"><input type="button" value="返回"></a>
					</div>
				</div>
			</div>
		</form> 
	</div>
</body>
<script>
	$(function(){
		var url = location.search;
		var args = url.split("?");
		var d=args[1].substring(3);
		$.ajax({
			type : 'post',
	       	url : '/videoServer/comboTab/getTaocanId.do?id='+d,
	       	success : function(data){
	       		$("#video_name").val(data[0].combo_name);
	       		$("#combo_price").val(data[0].combo_price);
	       		$("#video_introduce").val(data[0].combo_introduce);
	       	}
		})
		$.ajax({
			type : 'post',
			url : '/videoServer/videoTab/getVideoTabs.do',
			success : function(meg){
				for (var i = 0; i < meg.length; i++) {
			    	$("#courses_video").append("<tr><td><input type='checkbox' name='videoId' value="+meg[i].video_id+">"+ meg[i].video_name + "</td></tr>");
			    }
			}
		})
	})
	function updat(obj){
		var url = location.search;
		var args = url.split("?");
		var d=args[1].substring(3);
		var str="";
		$("input[name='videoId']").each(function(){    
             if($(this).is(":checked")){    
                 str +=$(this).val()+",";    
             }    
         });
		$.ajax({
	       	type : 'post',
	       	url : '/videoServer/comboTab/updComboById.do?combo_id='+d,
	       	data : {combo_name:$("#video_name").val(),video_id:str,combo_imgs:$("#video_img_url").val(),combo_introduce:$("#video_introduce").val(),combo_price:$("#combo_price").val()},
	       	success : function(data){
	       		alert("修改成功！")
	       		window.location.href="taocanInfo.html";
	       	}
	    })
	}
</script>
</html>